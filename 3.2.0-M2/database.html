
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Database Configuration &mdash; Slick 3.2.0-M2 documentation</title>
    
    <link rel="stylesheet" href="_static/slick.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.2.0-M2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Slick 3.2.0-M2 documentation" href="index.html" />
    <link rel="next" title="Database I/O Actions" href="dbio.html" />
    <link rel="prev" title="Core Concepts" href="concepts.html" />
<script type="text/javascript">
if(window.location.host == 'slick.typesafe.com'){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23127719-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();  
}
</script>

  </head>
  <body role="document">
    <div class="header-wrapper">
      <div class="header">
        <div class="rel">
        <span class="github"><a href="https://github.com/slick/slick/edit/master/slick/src/sphinx/database.rst">edit this page on github</a><span>
          |
          <a href="concepts.html" title="Core Concepts"
             accesskey="P">previous</a> |
          <a href="dbio.html" title="Database I/O Actions"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
        <div class="headertitle"><a href="index.html">
            <span class="logo"><img class="logo" src="_static/slick-logo.png" alt="Slick"/></span>
          3.2.0-M2 manual
        </a></div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="database-configuration">
<h1>Database Configuration<a class="headerlink" href="#database-configuration" title="Permalink to this headline">¶</a></h1>
<p>You can tell Slick how to connect to the JDBC database of your choice by
creating a <a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend&#64;Database:Database">Database</a> object,
which encapsulates the information. There are several
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef">factory methods</a>
on <cite>slick.jdbc.JdbcBackend.Database</cite> that you can use depending on what
connection data you have available.</p>
<div class="section" id="using-typesafe-config">
<h2>Using Typesafe Config<a class="headerlink" href="#using-typesafe-config" title="Permalink to this headline">¶</a></h2>
<p>The preferred way to configure database connections is through <a class="reference external" href="https://github.com/typesafehub/config">Typesafe Config</a> in your
<code class="docutils literal"><span class="pre">application.conf</span></code>, which is also used by <a class="reference external" href="https://playframework.com/">Play</a> and <a class="reference external" href="http://akka.io/">Akka</a> for their configuration.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">mydb</span> <span class="k">=</span> <span class="o">{</span>
  <span class="n">dataSourceClass</span> <span class="k">=</span> <span class="s">&quot;org.postgresql.ds.PGSimpleDataSource&quot;</span>
  <span class="n">properties</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">databaseName</span> <span class="k">=</span> <span class="s">&quot;mydb&quot;</span>
    <span class="n">user</span> <span class="k">=</span> <span class="s">&quot;myuser&quot;</span>
    <span class="n">password</span> <span class="k">=</span> <span class="s">&quot;secret&quot;</span>
  <span class="o">}</span>
  <span class="n">numThreads</span> <span class="k">=</span> <span class="mi">10</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Such a configuration can be loaded with <cite>Database.forConfig</cite> (see the
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forConfig(String,Config,Driver,ClassLoader):Database">API documentation</a>
of this method for details on the configuration parameters).</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">db</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">.</span><span class="n">forConfig</span><span class="o">(</span><span class="s">&quot;mydb&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-jdbc-url">
<span id="index-0"></span><h2>Using a JDBC URL<a class="headerlink" href="#using-a-jdbc-url" title="Permalink to this headline">¶</a></h2>
<p>You can pass a JDBC URL to
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forURL(String,String,String,Properties,String,AsyncExecutor,Boolean,ClassLoader):DatabaseDef">forURL</a>.
(see your database&#8217;s JDBC driver&#8217;s documentation for the correct URL syntax).</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">db</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">.</span><span class="n">forURL</span><span class="o">(</span><span class="s">&quot;jdbc:h2:mem:test1;DB_CLOSE_DELAY=-1&quot;</span><span class="o">,</span> <span class="n">driver</span><span class="o">=</span><span class="s">&quot;org.h2.Driver&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>Here we are connecting to a new, empty, in-memory H2 database called <code class="docutils literal"><span class="pre">test1</span></code> and keep it resident
until the JVM ends (<code class="docutils literal"><span class="pre">DB_CLOSE_DELAY=-1</span></code>, which is H2 specific).</p>
</div>
<div class="section" id="using-a-database-url">
<span id="index-1"></span><h2>Using a Database URL<a class="headerlink" href="#using-a-database-url" title="Permalink to this headline">¶</a></h2>
<p>A Database URL, a platform independent URL in the
form <code class="docutils literal"><span class="pre">vendor://user:password&#64;host:port/db</span></code>,
is often provided by platforms such as Heroku.
You can use a Database URL in Typesafe Config as shown here:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">databaseUrl</span> <span class="o">{</span>
  <span class="n">dataSourceClass</span> <span class="k">=</span> <span class="s">&quot;slick.jdbc.DatabaseUrlDataSource&quot;</span>
  <span class="n">properties</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">driver</span> <span class="k">=</span> <span class="s">&quot;org.postgresql.Driver&quot;</span>
    <span class="n">url</span> <span class="k">=</span> <span class="s">&quot;postgres://user:pass@host/dbname&quot;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>By default, the data source will use the value of the <code class="docutils literal"><span class="pre">DATABASE_URL</span></code> environment variable.
Thus you may omit the <code class="docutils literal"><span class="pre">url</span></code> property if the <code class="docutils literal"><span class="pre">DATABASE_URL</span></code> environment variable
is set. You may also define a custom environment variable with standard
Typesafe Config syntax, such as <code class="docutils literal"><span class="pre">${?MYSQL_DATABASE_URL}</span></code>.</p>
<p>Or you may pass a <a class="reference external" href="api/index.html#slick/jdbc/DatabaseUrlDataSource">DatabaseUrlDataSource</a> object to
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forDataSource(DataSource,AsyncExecutor,Boolean):DatabaseDef">forDataSource</a>.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">db</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">.</span><span class="n">forDataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="k">:</span> <span class="kt">slick.jdbc.DatabaseUrlDataSource</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-datasource">
<h2>Using a DataSource<a class="headerlink" href="#using-a-datasource" title="Permalink to this headline">¶</a></h2>
<p>You can pass a <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html">DataSource</a> object to
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forDataSource(DataSource,AsyncExecutor,Boolean):DatabaseDef">forDataSource</a>.
If you got it from the connection pool of your application framework, this plugs the pool into Slick.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">db</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">.</span><span class="n">forDataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="k">:</span> <span class="kt">javax.sql.DataSource</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-jndi-name">
<span id="index-2"></span><h2>Using a JNDI Name<a class="headerlink" href="#using-a-jndi-name" title="Permalink to this headline">¶</a></h2>
<p>If you are using <a class="reference external" href="http://en.wikipedia.org/wiki/JNDI">JNDI</a> you can pass a JNDI name to
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forName(String,AsyncExecutor):DatabaseDef">forName</a>
under which a <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html">DataSource</a> object can be looked up.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">db</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">.</span><span class="n">forName</span><span class="o">(</span><span class="n">jndiName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="database-thread-pool">
<span id="index-3"></span><h2>Database thread pool<a class="headerlink" href="#database-thread-pool" title="Permalink to this headline">¶</a></h2>
<p>Every <code class="docutils literal"><span class="pre">Database</span></code> contains an <a class="reference external" href="api/index.html#slick.util.AsyncExecutor">AsyncExecutor</a> that manages the thread pool
for asynchronous execution of Database I/O Actions. Its size is the main parameter to tune for the best
performance of the <code class="docutils literal"><span class="pre">Database</span></code> object. It should be set to the value that you would use for the
size of the <em>connection pool</em> in a traditional, blocking application (see <a class="reference external" href="https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing">About Pool Sizing</a>
in the <a class="reference external" href="http://brettwooldridge.github.io/HikariCP/">HikariCP</a> documentation for further information). When using
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forConfig(String,Config,Driver,ClassLoader):Database">Database.forConfig</a>,
the thread pool is configured directly in the external configuration file together with the connection
parameters. If you use any other factory method to get a <code class="docutils literal"><span class="pre">Database</span></code>, you can either use a default
configuration or specify a custom AsyncExecutor:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">db</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">.</span><span class="n">forURL</span><span class="o">(</span><span class="s">&quot;jdbc:h2:mem:test1;DB_CLOSE_DELAY=-1&quot;</span><span class="o">,</span> <span class="n">driver</span><span class="o">=</span><span class="s">&quot;org.h2.Driver&quot;</span><span class="o">,</span>
  <span class="n">executor</span> <span class="k">=</span> <span class="nc">AsyncExecutor</span><span class="o">(</span><span class="s">&quot;test1&quot;</span><span class="o">,</span> <span class="n">numThreads</span><span class="k">=</span><span class="mi">10</span><span class="o">,</span> <span class="n">queueSize</span><span class="k">=</span><span class="mi">1000</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="section" id="connection-pools">
<span id="index-4"></span><h2>Connection pools<a class="headerlink" href="#connection-pools" title="Permalink to this headline">¶</a></h2>
<p>When using a connection pool (which is always recommended in production environments) the <em>minimum</em>
size of the <em>connection pool</em> should also be set to at least the same size. The <em>maximum</em> size of
the <em>connection pool</em> can be set much higher than in a blocking application. Any connections beyond
the size of the <em>thread pool</em> will only be used when other connections are required to keep a
database session open (e.g. while waiting for the result from an asynchronous computation in the
middle of a transaction) but are not actively doing any work on the database.</p>
<p>Note that reasonable defaults for the connection pool sizes are calculated from the thread pool
size when using
<a class="reference external" href="api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef&#64;forConfig(String,Config,Driver,ClassLoader):Database">Database.forConfig</a>.</p>
<p>Slick uses <em>prepared</em> statements wherever possible but it does not cache them on its own. You
should therefore enable prepared statement caching in the connection pool&#8217;s configuration.</p>
</div>
<div class="section" id="databaseconfig">
<h2>DatabaseConfig<a class="headerlink" href="#databaseconfig" title="Permalink to this headline">¶</a></h2>
<p>On top of the configuration syntax for <code class="docutils literal"><span class="pre">Database</span></code>, there is another layer in the form of
<a class="reference external" href="api/index.html#slick.basic.DatabaseConfig">DatabaseConfig</a> which allows you to configure a Slick profile plus a
matching <code class="docutils literal"><span class="pre">Database</span></code> together. This makes it easy to abstract over different kinds of
database systems by simply changing a configuration file.</p>
<p>Here is a typical <code class="docutils literal"><span class="pre">DatabaseConfig</span></code> with a Slick profile object in <code class="docutils literal"><span class="pre">profile</span></code> and the database
configuration in <code class="docutils literal"><span class="pre">db</span></code>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">tsql</span> <span class="o">{</span>
  <span class="n">profile</span> <span class="k">=</span> <span class="s">&quot;slick.jdbc.H2Profile$&quot;</span>
  <span class="n">db</span> <span class="o">{</span>
    <span class="n">connectionPool</span> <span class="k">=</span> <span class="n">disabled</span>
    <span class="n">driver</span> <span class="k">=</span> <span class="s">&quot;org.h2.Driver&quot;</span>
    <span class="n">url</span> <span class="k">=</span> <span class="s">&quot;jdbc:h2:mem:tsql1;INIT=runscript from &#39;src/main/resources/create-schema.sql&#39;&quot;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
            <h3 style="margin-top: 1.5em;">Table Of Contents</h3>
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported-databases.html">Supported Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Core Concepts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Database Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-typesafe-config">Using Typesafe Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-jdbc-url">Using a JDBC URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-database-url">Using a Database URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-datasource">Using a DataSource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-jndi-name">Using a JNDI Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database-thread-pool">Database thread pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connection-pools">Connection pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#databaseconfig">DatabaseConfig</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dbio.html">Database I/O Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="schemas.html">Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="queries.html">Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-generation.html">Schema Code Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="userdefined.html">User-Defined Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql.html">Plain SQL Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="orm-to-slick.html">Coming from ORM to Slick</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql-to-slick.html">Coming from SQL to Slick</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">Database Migrations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="testkit.html">Slick TestKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx-documentation.html">Sphinx Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html#logging">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html#monitoring">Monitoring</a></li>
</ul>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="concepts.html" title="Core Concepts"
             >previous</a> |
          <a href="dbio.html" title="Database I/O Actions"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>

        </div>
        <div class="right">
          
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2016 Typesafe, Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>