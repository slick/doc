<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Getting Started · Slick</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='Scala Slick documentation'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/warnOldVersion.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/snippets.js"></script>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Slick
</a>
<div class="version-number">
<ul class="menu version-menu" data-options="disableHover: true; clickOpen: true; closeOnClickInside: false;">
<li class="is-dropdown-submenu-parent">
<a href="#">
3.5.0-pre.8.9767b964
</a>
<ul class="menu">
</ul>
</li>
</ul>
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="introduction.html" class="page">Introduction</a></li>
  <li><a href="supported-databases.html" class="page">Supported Databases</a></li>
  <li><a href="gettingstarted.html" class="active page">Getting Started</a></li>
  <li><a href="concepts.html" class="page">Core Concepts</a></li>
  <li><a href="database.html" class="page">Database Configuration</a></li>
  <li><a href="dbio.html" class="page">Database I/O Actions</a></li>
  <li><a href="schemas.html" class="page">Schemas</a>
  <ul>
    <li><a href="datetimetypes.html" class="page">Date and Time types</a></li>
  </ul></li>
  <li><a href="queries.html" class="page">Queries</a></li>
  <li><a href="code-generation.html" class="page">Schema Code Generation</a></li>
  <li><a href="userdefined.html" class="page">User-Defined Features</a></li>
  <li><a href="sql.html" class="page">Plain SQL Queries</a></li>
  <li><a href="orm-to-slick.html" class="page">Coming from ORM to Slick</a></li>
  <li><a href="sql-to-slick.html" class="page">Coming from SQL to Slick</a></li>
  <li><a href="cookbook.html" class="page">Cookbook</a></li>
  <li><a href="upgrade.html" class="page">Upgrade Guides</a>
  <ul>
    <li><a href="compat-report.html" class="page">Incompatible changes</a></li>
  </ul></li>
  <li><a href="migrations.html" class="page">Database Migrations</a></li>
  <li><a href="testkit.html" class="page">Slick TestKit</a></li>
  <li><a href="documentation.html" class="page">Markdown Documentation</a></li>
  <li><a href="config.html" class="page">Configuration</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="index.html">Slick</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Slick
</a>
<div class="version-number">
<ul class="menu version-menu" data-options="disableHover: true; clickOpen: true; closeOnClickInside: false;">
<li class="is-dropdown-submenu-parent">
<a href="#">
3.5.0-pre.8.9767b964
</a>
<ul class="menu">
</ul>
</li>
</ul>
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="introduction.html" class="page">Introduction</a></li>
  <li><a href="supported-databases.html" class="page">Supported Databases</a></li>
  <li><a href="gettingstarted.html" class="active page">Getting Started</a></li>
  <li><a href="concepts.html" class="page">Core Concepts</a></li>
  <li><a href="database.html" class="page">Database Configuration</a></li>
  <li><a href="dbio.html" class="page">Database I/O Actions</a></li>
  <li><a href="schemas.html" class="page">Schemas</a>
  <ul>
    <li><a href="datetimetypes.html" class="page">Date and Time types</a></li>
  </ul></li>
  <li><a href="queries.html" class="page">Queries</a></li>
  <li><a href="code-generation.html" class="page">Schema Code Generation</a></li>
  <li><a href="userdefined.html" class="page">User-Defined Features</a></li>
  <li><a href="sql.html" class="page">Plain SQL Queries</a></li>
  <li><a href="orm-to-slick.html" class="page">Coming from ORM to Slick</a></li>
  <li><a href="sql-to-slick.html" class="page">Coming from SQL to Slick</a></li>
  <li><a href="cookbook.html" class="page">Cookbook</a></li>
  <li><a href="upgrade.html" class="page">Upgrade Guides</a>
  <ul>
    <li><a href="compat-report.html" class="page">Incompatible changes</a></li>
  </ul></li>
  <li><a href="migrations.html" class="page">Database Migrations</a></li>
  <li><a href="testkit.html" class="page">Slick TestKit</a></li>
  <li><a href="documentation.html" class="page">Markdown Documentation</a></li>
  <li><a href="config.html" class="page">Configuration</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<span id="version-warning"></span>

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">Slick</a></li>
  <li>Getting Started</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#getting-started" name="getting-started" class="anchor"><span class="anchor-link"></span></a>Getting Started</h1>
<p>The easiest way to get started is with a working sample application. The following samples are part of the official Slick distribution. You can either clone Slick from github or download pre-packaged zip files with an individual sample plus an <a href="https://www.scala-sbt.org/">sbt</a> launcher.</p>
<ul>
  <li>
  <p>To learn the basics of Slick, start with the <a href="https://github.com/slick/hello-slick"><strong>Hello Slick</strong> sample</a>. This is the  one we are using in this chapter.</p></li>
  <li>
  <p>The <a href="https://github.com/slick/slick-plainsql"><strong>Plain SQL Queries</strong> sample</a> shows you how to do SQL queries with Slick.  See <a href="sql.html">Plain SQL Queries</a> for details.</p></li>
  <li>
  <p>The <a href="https://github.com/slick/slick-multidb"><strong>Multi-DB Patterns</strong> sample</a> shows you how to write Slick applications that can  use different database systems and how to use custom database functions in Slick queries.</p></li>
  <li>
  <p>The <a href="https://github.com/slick/slick-testkit-example"><strong>TestKit</strong> sample</a> shows you how to use Slick TestKit to test your own  database profiles.</p></li>
</ul>
<h2><a href="#hello-slick" name="hello-slick" class="anchor"><span class="anchor-link"></span></a>Hello Slick</h2>
<p>The <em>Hello Slick</em> sample contains simple Scala application, <code>HelloSlick.scala</code>, that does basic FRM operations with Slick. You can run it out of the box with <code>sbt run</code>. To make things simple this project uses an embedded in-memory <a href="https://www.h2database.com/">H2</a> database, so no database installation or configuration is required.</p>
<p>The file <code>TableSuite.scala</code> contains ScalaTest tests which perform some basic integration tests. You can run these tests with <code>sbt test</code>.</p><div class="callout note "><div class="callout-title">Note</div>
<p>The example code in this app has intentionally verbose type information. In normal applications type inference is used more extensively but to assist with learning the type information was included. </p></div>
<h2><a href="#adding-slick-to-your-project" name="adding-slick-to-your-project" class="anchor"><span class="anchor-link"></span></a>Adding Slick to Your Project</h2>
<p>To include Slick in an existing project use the library published on Maven Central. Add the following to your build definition (<code>build.sbt</code> for <a href="https://www.scala-sbt.org/">sbt</a> or <code>pom.xml</code> for Maven):</p>
<pre class="prettyprint"><code class="language-scala">libraryDependencies ++= Seq(
  &quot;com.typesafe.slick&quot; %% &quot;slick&quot; % &quot;3.5.0-pre.8.9767b964&quot;,
  &quot;org.slf4j&quot; % &quot;slf4j-nop&quot; % &quot;1.7.26&quot;,
  &quot;com.typesafe.slick&quot; %% &quot;slick-hikaricp&quot; % &quot;3.5.0-pre.8.9767b964&quot;
)
</code></pre>
<p>Slick uses <a href="https://www.slf4j.org/">SLF4J</a> for its own debug logging so you also need to add an SLF4J implementation. <em>Hello Slick</em> uses <code>slf4j-nop</code> to disable logging. You have to replace this with a real logging framework like <a href="https://logback.qos.ch/">Logback</a> if you want to see log output.</p>
<p>The <a href="https://www.reactive-streams.org/">Reactive Streams</a> API is pulled in automatically as a transitive dependency.</p>
<p>If you want to use Slick&rsquo;s connection pool support for <a href="https://github.com/brettwooldridge/HikariCP">HikariCP</a>, you need to add the <code>slick-hikaricp</code> module as a dependency as shown above. It will automatically provide a compatible version of HikariCP as a transitive dependency. Otherwise, you might need to disable connection pooling or specify a third-party connection pool.</p>
<h2><a href="#quick-introduction" name="quick-introduction" class="anchor"><span class="anchor-link"></span></a>Quick Introduction</h2>
<p>To use Slick you first need to import the API for the database you will be using, like:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L4-L7" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Use H2Profile to connect to an H2 database
import scala.concurrent.ExecutionContext.Implicits.global

import slick.jdbc.H2Profile.api.*</code></pre>
<p>Since we are using <a href="https://www.h2database.com/">H2</a> as our database system, we need to import features from Slick&rsquo;s <code>H2Profile</code>. A profile&rsquo;s <code>api</code> object contains all commonly needed imports from the profile and other parts of Slick such as <a href="database.html">database handling</a>.</p>
<p>Slick&rsquo;s API is fully asynchronous and runs database calls in a separate thread pool. For running user code in composition of <code>DBIOAction</code> and <code>Future</code> values, we import the global <code>ExecutionContext</code>. When using Slick as part of a larger application (e.g. with <a href="https://www.playframework.com/">Play</a> or <a href="https://akka.io/">Akka</a>) the framework may provide a better alternative to this default <code>ExecutionContext</code>.</p>
<h3><a href="#database-configuration" name="database-configuration" class="anchor"><span class="anchor-link"></span></a>Database Configuration</h3>
<p>In the body of the application we create a <code>Database</code> object which specifies how to connect to a database. In most cases you will want to configure database connections with <a href="https://github.com/lightbend/config">Typesafe Config</a> in your <code>application.conf</code>, which is also used by <a href="https://www.playframework.com/">Play</a> and <a href="https://akka.io/">Akka</a> for their configuration:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/application.conf#L2-L7" target="_blank" title="Go to snippet source">source</a><code class="language-conf">h2mem1 = {
  url = &quot;jdbc:h2:mem:test1&quot;
  driver = org.h2.Driver
  connectionPool = disabled
  keepAliveConnection = true
}</code></pre>
<p>For the purpose of this example we disable the connection pool (there is no point in using one for an embedded in-memory database). When you use a real, external database server, the connection pool provides improved performance and resilience.</p>
<p>The <code>keepAliveConnection</code> option (which is only available without a connection pool) keeps an extra connection open for the lifetime of the <code>Database</code> object in the application. This ensures that the database does not get dropped while we are using it.</p>
<p><em>Hello Slick</em> is a standalone command-line application, not running inside of a container which takes care of resource management, so we have to do it ourselves. Since all database calls in Slick are asynchronous, we are going to compose Futures throughout the app, but eventually we have to wait for the result. This gives us the following scaffolding:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L53-L155" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val db = Database.forConfig(&quot;h2mem1&quot;)
try {
  // val resultFuture: Future[_] = { ... }
  Await.result(resultFuture, Duration.Inf)
  lines.foreach(Predef.println _)
} finally db.close</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>A <code>Database</code> object usually manages a thread pool and a connection pool. You should always shut it down properly when it is no longer needed (unless the JVM process terminates anyway). Do not create a new <code>Database</code> for every database operation. A single instance is meant to be kept alive for the entire lifetime your your application.</p></div>
<p>If you are not familiar with asynchronous, Future-based programming Scala, you can learn more about <a href="https://docs.scala-lang.org/overviews/core/futures.html">Futures and Promises</a> in the Scala documentation.</p>
<h3><a href="#schema" name="schema" class="anchor"><span class="anchor-link"></span></a>Schema</h3>
<p>Before we can write Slick queries, we need to describe a database schema with <code>Table</code> row classes and <code>TableQuery</code> values for our tables. You can either use the <a href="code-generation.html">code generator</a> to automatically create them for your database schema or you can write them by hand:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L24-L48" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Definition of the SUPPLIERS table
class Suppliers(tag: Tag) extends Table[(Int, String, String, String, String, String)](tag, &quot;SUPPLIERS&quot;) {
  def id = column[Int](&quot;SUP_ID&quot;, O.PrimaryKey) // This is the primary key column
  def name = column[String](&quot;SUP_NAME&quot;)
  def street = column[String](&quot;STREET&quot;)
  def city = column[String](&quot;CITY&quot;)
  def state = column[String](&quot;STATE&quot;)
  def zip = column[String](&quot;ZIP&quot;)
  // Every table needs a * projection with the same type as the table&#39;s type parameter
  def * = (id, name, street, city, state, zip)
}
val suppliers = TableQuery[Suppliers]

// Definition of the COFFEES table
class Coffees(tag: Tag) extends Table[(String, Int, Double, Int, Int)](tag, &quot;COFFEES&quot;) {
  def name = column[String](&quot;COF_NAME&quot;, O.PrimaryKey)
  def supID = column[Int](&quot;SUP_ID&quot;)
  def price = column[Double](&quot;PRICE&quot;)
  def sales = column[Int](&quot;SALES&quot;)
  def total = column[Int](&quot;TOTAL&quot;)
  def * = (name, supID, price, sales, total)
  // A reified foreign key relation that can be navigated to create a join
  def supplier = foreignKey(&quot;SUP_FK&quot;, supID, suppliers)(_.id)
}
val coffees = TableQuery[Coffees]</code></pre>
<p>All columns get a name (usually in camel case for Scala and upper case with underscores for SQL) and a Scala type (from which the SQL type can be derived automatically). The table object also needs a Scala name, SQL name and type. The type argument of the table must match the type of the special <code>*</code> projection. In simple cases this is a tuple of all columns but more complex mappings are possible.</p>
<p>The <code>foreignKey</code> definition in the <code>coffees</code> table ensures that the <code>supID</code> field can only contain values for which a corresponding <code>id</code> exists in the <code>suppliers</code> table, thus creating an <em>n to one</em> relationship: A <code>Coffees</code> row points to exactly one <code>Suppliers</code> row but any number of coffees can point to the same supplier. This constraint is enforced at the database level.</p>
<h3><a href="#populating-the-database" name="populating-the-database" class="anchor"><span class="anchor-link"></span></a>Populating the Database</h3>
<p>The connection to the embedded H2 database engine provides us with an empty database. Before we can execute queries, we need to create the database schema (consisting of the <code>coffees</code> and <code>suppliers</code> tables) and insert some test data:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L59-L82" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val setup = DBIO.seq(
  // Create the tables, including primary and foreign keys
  (suppliers.schema ++ coffees.schema).create,

  // Insert some suppliers
  suppliers += (101, &quot;Acme, Inc.&quot;, &quot;99 Market Street&quot;, &quot;Groundsville&quot;, &quot;CA&quot;, &quot;95199&quot;),
  suppliers += (49, &quot;Superior Coffee&quot;, &quot;1 Party Place&quot;, &quot;Mendocino&quot;, &quot;CA&quot;, &quot;95460&quot;),
  suppliers += (150, &quot;The High Ground&quot;, &quot;100 Coffee Lane&quot;, &quot;Meadows&quot;, &quot;CA&quot;, &quot;93966&quot;),
  // Equivalent SQL code:
  // insert into SUPPLIERS(SUP_ID, SUP_NAME, STREET, CITY, STATE, ZIP) values (?,?,?,?,?,?)

  // Insert some coffees (using JDBC&#39;s batch insert feature, if supported by the DB)
  coffees ++= Seq(
    (&quot;Colombian&quot;, 101, 7.99, 0, 0),
    (&quot;French_Roast&quot;, 49, 8.99, 0, 0),
    (&quot;Espresso&quot;, 150, 9.99, 0, 0),
    (&quot;Colombian_Decaf&quot;, 101, 8.99, 0, 0),
    (&quot;French_Roast_Decaf&quot;, 49, 9.99, 0, 0)
  )
  // Equivalent SQL code:
  // insert into COFFEES(COF_NAME, SUP_ID, PRICE, SALES, TOTAL) values (?,?,?,?,?)
)

val setupFuture = db.run(setup)</code></pre>
<p>The <code>TableQuery</code>&rsquo;s <code>schema</code> method creates <code>DDL</code> (data definition language) objects with the database-specific code for creating and dropping tables and other database entities. Multiple <code>DDL</code> values can be combined with <code>++</code> to allow all entities to be created and dropped in the correct order, even when they have circular dependencies on each other.</p>
<p>Inserting the tuples of data is done with the <code>+=</code> and <code>++=</code> methods, similar to how you add data to mutable Scala collections.</p>
<p>The <code>create</code>, <code>+=</code> and <code>++=</code> methods return <em>database I/O actions</em> (<code>DBIOAction</code>) which can be executed on a database at a later time to produce a result. If you do not care about more advanced features like streaming, effect tracking or extension methods for certain actions, you can denote their type as <code>DBIO[T]</code> (for an operation which will eventually produce a value of type <code>T</code>).</p>
<p>There are several different combinators for combining multiple <code>DBIOAction</code>s into sequences, yielding another action. Here we use the simplest one, <code>DBIO.seq</code>, which can concatenate any number of actions, discarding the return values (i.e. the resulting <code>DBIOAction</code> produces a result of type <code>Unit</code>). We then execute the setup action asynchronously with <code>db.run</code>, yielding a <code>Future[Unit]</code>.</p><div class="callout note "><div class="callout-title">Note</div>
<p>Database connections and transactions are managed automatically by Slick. By default connections are acquired and released on demand and used in <em>auto-commit</em> mode. In this mode we have to populate the <code>suppliers</code> table first because the <code>coffees</code> data can only refer to valid supplier IDs. We could also use an explicit transaction bracket encompassing all these statements (<code>db.run(setup.transactionally)</code>). Then the order would not matter because the constraints are only enforced at the end when the transaction is committed.</p></div>
<p>When inserting data, the database usually returns the number of affected rows, therefore the return type is <code>Option[Int]</code> as can be seen in this definition of <code>insertAction</code>:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/paradox/samples/hello-slick/src/main/scala/HelloSlick.scala#L33-L47" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Insert some coffees (using JDBC&#39;s batch insert feature)
val insertAction: DBIO[Option[Int]] = coffees ++= Seq (
  (&quot;Colombian&quot;,         101, 7.99, 0, 0),
  (&quot;French_Roast&quot;,       49, 8.99, 0, 0),
  (&quot;Espresso&quot;,          150, 9.99, 0, 0),
  (&quot;Colombian_Decaf&quot;,   101, 8.99, 0, 0),
  (&quot;French_Roast_Decaf&quot;, 49, 9.99, 0, 0)
)

val insertAndPrintAction: DBIO[Unit] = insertAction.map { coffeesInsertResult =&gt;
  // Print the number of rows inserted
  coffeesInsertResult foreach { numRows =&gt;
    println(s&quot;Inserted $numRows rows into the Coffees table&quot;)
  }
}</code></pre>
<p>We can use the <code>map</code> combinator to run some code and compute a new value from the value returned by the action (or in this case run it only for its side effects and return <code>Unit</code>).</p><div class="callout note "><div class="callout-title">Note</div>
<p>Note that <code>map</code> and all other combinators which run user code (e.g. <code>flatMap</code>, <code>cleanup</code>, <code>filter</code>) take an implicit <code>ExecutionContext</code> on which to run this code. Slick uses its own <code>ExecutionContext</code> internally for running blocking database I/O but it always maintains a clean separation and prevents you from running non-I/O code on it.</p></div>
<h3><a href="#querying" name="querying" class="anchor"><span class="anchor-link"></span></a>Querying</h3>
<p>The simplest kind of query iterates over all the data in a table by calling <code>.result</code> on the <code>TableQuery</code> to get a <code>DBIOAction</code>:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L87-L94" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Read all coffees and print them to the console
println(&quot;Coffees:&quot;)
db.run(coffees.result).map(_.foreach {
  case (name, supID, price, sales, total) =&gt;
    println(&quot;  &quot; + name + &quot;\t&quot; + supID + &quot;\t&quot; + price + &quot;\t&quot; + sales + &quot;\t&quot; + total)
})
// Equivalent SQL code:
// select COF_NAME, SUP_ID, PRICE, SALES, TOTAL from COFFEES</code></pre>
<p>This corresponds to a <code>SELECT * FROM COFFEES</code> in SQL (except that the <code>*</code> is the table&rsquo;s <code>*</code> projection we defined earlier and not whatever the database sees as <code>*</code>). The type of the values we get in the loop is, unsurprisingly, the type parameter of <code>Coffees</code>.</p>
<p>Let&rsquo;s add a <em>projection</em> to this basic query. This is written in Scala with the <code>map</code> method or a <em>for comprehension</em>:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L100-L114" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Why not let the database do the string conversion and concatenation?
val q1 = for (c &lt;- coffees)
  yield LiteralColumn(&quot;  &quot;) ++ c.name ++ &quot;\t&quot; ++ c.supID.asColumnOf[String] ++
    &quot;\t&quot; ++ c.price.asColumnOf[String] ++ &quot;\t&quot; ++ c.sales.asColumnOf[String] ++
    &quot;\t&quot; ++ c.total.asColumnOf[String]
// The first string constant needs to be lifted manually to a LiteralColumn
// so that the proper ++ operator is found

// Equivalent SQL code:
// select &#39;  &#39; || COF_NAME || &#39;\t&#39; || SUP_ID || &#39;\t&#39; || PRICE || &#39;\t&#39; SALES || &#39;\t&#39; TOTAL from COFFEES

db.stream(q1.result).foreach(println)</code></pre>
<p>The output will be the same: for each row of the table, all columns get converted to strings and concatenated into one tab-separated string. The difference is that all of this now happens inside the database engine, and only the resulting concatenated string is shipped to the client. Note that we avoid Scala&rsquo;s <code>+</code> operator (which is already heavily overloaded) in favor of <code>++</code> (commonly used for sequence concatenation). Also, there is no automatic conversion of other argument types to strings. This has to be done explicitly with the type conversion method <code>asColumnOf</code>.</p>
<p>This time we also use <a href="https://www.reactive-streams.org/">Reactive Streams</a> to get a streaming result from the database and print the elements as they come in instead of materializing the whole result set upfront.</p>
<p>Joining and filtering tables is done the same way as when working with Scala collections:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L120-L130" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Perform a join to retrieve coffee names and supplier names for
// all coffees costing less than $9.00
val q2 = for {
  c &lt;- coffees if c.price &lt; 9.0
  s &lt;- suppliers if s.id === c.supID
} yield (c.name, s.name)
// Equivalent SQL code:
// select c.COF_NAME, s.SUP_NAME from COFFEES c, SUPPLIERS s where c.PRICE &lt; 9.0 and s.SUP_ID = c.SUP_ID</code></pre><div class="callout warning "><div class="callout-title">Warning</div>
<p>Note the use of <code>===</code> instead of <code>==</code> for comparing two values for equality and <code>=!=</code> instead of <code>!=</code> for inequality. This is necessary because these operators are already defined (with unsuitable types and semantics) on the base type <code>Any</code>, so they cannot be replaced by extension methods. The other comparison operators are the same as in standard Scala code: <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&gt;</code>.</p></div>
<p>The generator expression <code>suppliers if s.id === c.supID</code> follows the relationship established by the foreign key <code>Coffees.supplier</code>. Instead of repeating the join condition here we can use the foreign key directly:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/code/FirstExample.scala#L141-L146" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val q3 = for {
  c &lt;- coffees if c.price &lt; 9.0
  s &lt;- c.supplier
} yield (c.name, s.name)
// Equivalent SQL code:
// select c.COF_NAME, s.SUP_NAME from COFFEES c, SUPPLIERS s where c.PRICE &lt; 9.0 and s.SUP_ID = c.SUP_ID</code></pre>
<h3><a href="#aggregations" name="aggregations" class="anchor"><span class="anchor-link"></span></a>Aggregations</h3>
<p>Aggregates values like minimum, maximum, summation, and average can be computed by the database using the query functions <code>min</code>, <code>max</code>, <code>sum</code> and <code>avg</code> like:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/paradox/samples/hello-slick/src/main/scala/HelloSlick.scala#L170-L171" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Create a new scalar value that calculates the maximum price
val maxPrice: Rep[Option[Double]] = coffees.map(_.price).max</code></pre>
<p>This creates a new scalar query (<code>Rep</code>) that can be run like a collection-valued <code>Query</code> by calling <code>.result</code>.</p>
<h3><a href="#plain-sql-string-interpolation" name="plain-sql-string-interpolation" class="anchor"><span class="anchor-link"></span></a>Plain SQL / String Interpolation</h3>
<p>Sometimes writing SQL code manually is the easiest and best way to go but we don&rsquo;t want to lose SQL injection protection that Slick includes. <a href="sql.html">SQL String Interpolation</a> provides a nice API for doing this. In <em>Hello Slick</em> we use the <code>sql</code> interpolator:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/paradox/samples/hello-slick/src/main/scala/HelloSlick.scala#L182-L188" target="_blank" title="Go to snippet source">source</a><code class="language-scala">/* Manual SQL / String Interpolation */

// A value to insert into the statement
val state = &quot;CA&quot;

// Construct a SQL statement manually with an interpolated value
val plainQuery = sql&quot;select SUP_NAME from SUPPLIERS where STATE = $state&quot;.as[String]</code></pre>
<p>This produces a database I/O action that can be run or streamed in the usual way.</p>
<h3><a href="#case-class-mapping" name="case-class-mapping" class="anchor"><span class="anchor-link"></span></a>Case Class Mapping</h3>
<p>The <code>CaseClassMapping.scala</code> app provides an example which uses a <em>case class</em> instead of tupled values. To use case classes instead of tuples setup a <code>def *</code> projection which transforms the tuple values to and from the case class. For example:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/paradox/samples/hello-slick/src/main/scala/CaseClassMapping.scala#L39" target="_blank" title="Go to snippet source">source</a><code class="language-scala">def * = (name, id.?).mapTo[User]</code></pre>
<p>This uses the <code>mapTo</code> macro to convert between <code>(Option[Int], String)</code> and <code>User</code> bidirectionally. Now all of the queries can work with a <code>User</code> object instead of the tuples. </p>
<p>See <a href="schemas.html#mapped-tables">Mapped Tables</a> for details.</p>
<h3><a href="#auto-generated-primary-keys" name="auto-generated-primary-keys" class="anchor"><span class="anchor-link"></span></a>Auto-Generated Primary Keys</h3>
<p>The <code>Users</code> table mapping in <code>CaseClassMapping.scala</code> defines an <code>id</code> column which uses an auto-incrementing primary key:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/paradox/samples/hello-slick/src/main/scala/CaseClassMapping.scala#L32" target="_blank" title="Go to snippet source">source</a><code class="language-scala">def id = column[Int](&quot;ID&quot;, O.PrimaryKey, O.AutoInc)</code></pre>
<p>See <a href="schemas.html#table-rows">Table Rows</a> for more column options.</p>
<h3><a href="#running-queries" name="running-queries" class="anchor"><span class="anchor-link"></span></a>Running Queries</h3>
<p>So far you have seen how to get a <code>Seq</code> from a collection-valued query and how to stream individual elements. There are several other useful methods which are shown in <code>QueryActions.scala</code>. They are equally applicable to <a href="queries.html">Scala queries</a> and <a href="sql.html">Plain SQL queries</a>.</p>
<p>Note the use of <code>Compiled</code> in this app. It is used to define a pre-compiled query that can be executed with different parameters without having to recompile the SQL statement each time. This is the preferred way of defining queries in real-world applications. It prevents the (possibly expensive) compilation each time and leads to the same SQL statement (or a small, fixed set of SQL statements) so that the database system can also reuse a previously computed execution plan. As a side-effect, all parameters are automatically turned into bind variables:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/slick/slick/tree/main/doc/paradox/samples/hello-slick/src/main/scala/QueryActions.scala#L22-L26" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Define a pre-compiled parameterized query for reading all key/value
// pairs up to a given key.
val upTo = Compiled { (k: Rep[Int]) =&gt;
  dict.filter(_.key &lt;= k).sortBy(_.key)
}</code></pre>
<p>See <a href="queries.html#compiled-queries">Compiled Queries</a> for details.</p>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/slick/slick/tree/main/doc/paradox/gettingstarted.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="concepts.html">Core Concepts</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="gettingstarted.html#getting-started" class="header">Getting Started</a>
  <ul>
    <li><a href="gettingstarted.html#hello-slick" class="header">Hello Slick</a></li>
    <li><a href="gettingstarted.html#adding-slick-to-your-project" class="header">Adding Slick to Your Project</a></li>
    <li><a href="gettingstarted.html#quick-introduction" class="header">Quick Introduction</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2024</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/versions.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
<script type="text/javascript">jQuery(function(jq){initOldVersionWarnings(jq, '3.5.0-pre.8.9767b964', '')});</script>


</html>
